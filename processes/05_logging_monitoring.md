# Linux Logging & Monitoring

Logging and monitoring are critical for DevOps. They help engineers detect issues, understand system behavior, and maintain service reliability in production environments.

---

## Logging Fundamentals

- **Logs** are records of events generated by the OS, services, or applications.
- Stored in `/var/log/` by default.
- Common log files:
  - `/var/log/syslog` → general system messages
  - `/var/log/auth.log` → authentication events
  - `/var/log/dmesg` → kernel ring buffer messages
- DevOps relevance:
  - Debug failed deployments
  - Audit security events
  - Maintain system health

---

## Viewing and Filtering Logs

Linux provides several commands to inspect log files.

### View the entire log

```bash
cat /var/log/syslog
```
View the last few lines (real-time monitoring)
```bash
tail -n 20 /var/log/syslog
```
```bash
tail -f /var/log/syslog
```
- -n 20 → show last 20 lines
- -f → follow the log in real-time

Search logs for specific patterns
``` bash
grep "error" /var/log/syslog
```
- Filters lines containing the word “error”
- Can combine with tail -f to watch specific events live:
```bash
tail -f /var/log/syslog | grep "ssh"
```
DevOps relevance:
- Quickly detect failures in services or deployments
- Monitor security events in real time
- Filter for specific incidents without reading entire logs

---

## System Monitoring Commands

Monitoring system resources is critical for ensuring performance and stability in production environments.

### top — Real-time process monitoring

```bash
top
```
- Displays CPU, memory, and process usage
- Interactive: q to quit, k to kill a process
- Shows which processes consume the most resources

htop — Enhanced top
```bash
htop
```
Colorized, interactive version of top
- Allows scrolling and filtering
- Easier to identify bottlenecks
- Install with: sudo apt install htop

vmstat — Virtual memory statistics
```bash
vmstat 5
```
- Reports CPU, memory, swap, I/O every 5 seconds
- Useful for spotting memory or CPU spikes
- DevOps relevance: tune performance, diagnose resource bottlenecks

---

## Log Management Basics

Logs are the primary source of truth during outages, security incidents, and postmortems. A DevOps engineer must know where logs live and how they are managed.

### System logs

Common log locations:

```bash
/var/log/syslog
/var/log/auth.log
/var/log/kern.log
```
- syslog → general system activity
- auth.log → authentication and sudo usage
- kern.log → kernel messages

View logs safely:
```bash
less /var/log/syslog
tail -f /var/log/syslog
```

---

## journald and journalctl

Modern Linux systems use systemd-journald for centralized logging.

## View logs with journalctl
```bash
journalctl
```
Follow logs in real time:
```bash
journalctl -f
```
View logs for a specific service:
```bash
journalctl -u ssh
```
View logs since last boot:
```bash
journalctl -b
```
DevOps relevance:
- Faster incident response
- Structured logs
- Centralized visibility

---

## Log Rotation (Why it matters)
Unmanaged logs will eventually fill disks and crash systems.

Log rotation:
- Compresses old logs
- Deletes stale logs
- Prevents disk exhaustion

Managed by:
```bash
/etc/logrotate.conf
/etc/logrotate.d/
```
This is non-negotiable in production environments.

---

## DevOps Takeaways

Processes and monitoring are not academic topics.

You use them to:
- Identify runaway processes
- Kill misbehaving workloads
- Diagnose memory leaks
- Investigate outages
- Prove root cause during incidents

If you cannot read processes and logs, you cannot operate systems.

---

## Practice Exercises

1. Start a background process and identify its PID
2. Monitor CPU usage using top or htop
3. View authentication logs using journalctl
4. Observe memory behavior using vmstat

Document your observations.

---